<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>MeasureMint | convert units with breeze</title>
    <!-- ? HTMX -->
    <script defer src="https://unpkg.com/htmx.org@2.0.4" integrity="sha384-HGfztofotfshcF7+8n44JQL2oJmowVChPTg48S+jvZoztPfvwD79OC/LTtG6dMp+" crossorigin="anonymous"></script>
    <script defer src="{{url_for('static', path='/js/htmx/response-targets.js')}}"></script>


    <!-- ? DaisyUI -->
    <link href="https://cdn.jsdelivr.net/npm/daisyui@5" rel="stylesheet" type="text/css" />
    <script defer src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>
    <link href="https://cdn.jsdelivr.net/npm/daisyui@5/themes.css" rel="stylesheet" type="text/css" />
  </head>
  <body class="w-max m-auto">
    <h1 class="text-xl font-bold my-8 text-center">MeasureMint</h1>
    <div hx-ext="response-targets" class="space-y-4">
      <form
        class="space-y-4 sm:space-y-0 sm:grid grid-cols-2 gap-4"
        id="convertForm"
        hx-post="{{url_for('convert')}}"
        method="post"
        hx-indicator="[type=submit] .htmx-indicator"
        hx-target="output[name=result]"
        hx-target-error="output[name=error]"
      >
        <fieldset class="fieldset col-span-2">
          <legend class="fieldset-legend">Quantity</legend>
          <input type="number" class="input w-full" name="quantity" placeholder="Enter qty." required />
        </fieldset>
        <fieldset class="fieldset">
          <!-- TODO: add loading icon when suggestions are loading -->
          <legend class="fieldset-legend">From</legend>
          <label class="input">
            <input
              type="text"
              class="focus:outline-0"
              name="from_unit"
              placeholder="Type for suggestions"
              hx-get="{{url_for('suggest_units')}}"
              hx-trigger="keyup delay:500ms"
              hx-sync="this:replace"
              hx-target="datalist"
              hx-params="from_unit"
              list="suggestions"
              hx-indicator="next"
              required
            />
            <svg class="htmx-indicator animate-spin" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="currentColor" d="M11.5 4A8.5 8.5 0 0 0 3 12.5H2A9.5 9.5 0 0 1 11.5 3z"/></svg>
          </label>
        </fieldset>
        <fieldset class="fieldset">
          <!-- TODO: add loading icon when suggestions are loading -->
          <legend class="fieldset-legend">To</legend>
          <label class="input">
            <input
              type="text"
              class="focus:outline-0"
              name="to_unit"
              placeholder="Type for suggestions"
              hx-get="{{url_for('suggest_units')}}"
              hx-trigger="keyup delay:500ms"
              hx-target="datalist"
              hx-params="to_unit"
              list="suggestions"
              hx-indicator="next"
              required
            />
            <svg class="htmx-indicator animate-spin" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="currentColor" d="M11.5 4A8.5 8.5 0 0 0 3 12.5H2A9.5 9.5 0 0 1 11.5 3z"/></svg>
          </label>
        </fieldset>
        <datalist id="suggestions"></datalist>
        <button type="submit" class="btn btn-primary w-full col-span-2">
          <svg class="htmx-indicator animate-spin -ml-5" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="currentColor" d="M11.5 4A8.5 8.5 0 0 0 3 12.5H2A9.5 9.5 0 0 1 11.5 3z"/></svg>
          Convert!
        </button>
      </form>
      <output name="result" for="convertForm" class="flex flex-col items-center justify-center"></output>
      <output name="error" for="convertForm" class="toast"></output>
    </div>
  </body>
</html>

